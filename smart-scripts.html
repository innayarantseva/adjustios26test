<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Smart Scripts</title>
</head>

<body>
  <a href="index.html">Back to main page</a>
  
  <h1>Test Smart Scripts</h1>

  <p>Generated link: <code id="link" style="display: block; word-break: break-all; font-size: medium;"></code></p>

  <script type="application/javascript">
    !function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.AdjustSmartScript=n():e.AdjustSmartScript=n()}(self,(function(){return function(){"use strict";var e={385:function(e,n,r){var t=this&&this.__assign||function(){return t=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},t.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.createLink=n.getVersion=n.setLogLevel=void 0;var o=r(538),a=r(989),i=r(921),s=r(614),c=r(580),u=r(185),d=r(672);n.setLogLevel=function(e){["debug","warn","error","none"].includes(e)?s.Logger.setLogLevel(s.LogLevel[e]):s.Logger.error("Can not set log level '".concat(e,"', possible values are 'debug', 'warn', 'error' and 'none'"))},n.getVersion=function(){return s.Logger.debug(d.VERSION),d.VERSION},n.createLink=function(e){var n,r;if(!e)return s.Logger.error("No args passed, can not create adjust link"),null;var d=new URL(window.location.href);e.inputUrl&&((0,u.isUrlValid)(e.inputUrl)?d=new URL(e.inputUrl):s.Logger.error("Invalid inputUrl provided: "+e.inputUrl+", using current page address instead"));var p,l={},f=(0,c.chooseNetwork)(d,e.networks);if(f)p=f.linkToken,l=t(t({},l),f.networkParams);else if(s.Logger.debug("Use defaultLinkToken to create adjust link"),p=e.defaultLinkToken,!(0,u.isNonEmptyString)(p))return s.Logger.error("defaultLinkToken is not found or it is invalid, can not create adjust link"),null;for(var g=0,m=i.Constants.adjustParameters;g<m.length;g++){var v=e[b=m[g]];(v||b in i.BaseParameter)&&(l=t(t({},l),((n={})[b]=(0,o.extractParameter)(d,b,v,!0),n)))}if(e.customParameters)if(Array.isArray(e.customParameters))for(var h=0,y=e.customParameters;h<y.length;h++){var k=y[h],b=k.out;if((0,u.isNonEmptyString)(b))l=t(t({},l),((r={})[b]=(0,o.extractParameter)(d,b,k),r));else{var S="Invalid configuration object for custom parameter provided: "+JSON.stringify(k)+".\nYou should specify `out` property which is an output name of parameter";s.Logger.error(S)}}else s.Logger.error("Invalid customParameters provided, it should be an array");return(0,a.linkTemplate)(t({domain:e.domain,token:p,iosAppSchema:e.iosAppSchema,iosDeeplinkPath:e.iosDeeplinkPath,androidAppSchema:e.androidAppSchema,androidDeeplinkPath:e.androidDeeplinkPath},l))}},580:function(e,n,r){var t=this&&this.__assign||function(){return t=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},t.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.chooseNetwork=void 0;var o=r(921),a=r(614),i=r(538),s=r(185);function c(e,n){for(var r,a={},c=0,u=o.Constants.networks[n].parameters;c<u.length;c++){var d=u[c],p={in:d};a=t(t({},a),((r={})[d]=(0,i.extractParameter)(e,d,p,!0),r))}return(0,s.omitNotDefined)(a)}n.chooseNetwork=function(e,n){if(!n||(0,s.isEmptyObject)(n))return a.Logger.warn("No networks configured"),null;!function(e){for(var n=0,r=Object.entries(e);n<r.length;n++){var t=r[n],i=t[0],c=t[1],u=i;(0,s.isNonEmptyString)(c.linkToken)||a.Logger.warn("Misconfigured network: "+o.Constants.networks[u].name+", linkToken couldn't be empty")}}(n);for(var r=0,t=Object.entries(n);r<t.length;r++){var i=t[r],u=i[0],d=i[1];if(g=u,Object.keys(o.Constants.networks).includes(g)){var p=u,l=c(e,p);if(!(0,s.isEmptyObject)(l)){a.Logger.debug("Detected network: "+o.Constants.networks[p].name);var f=d.linkToken;return(0,s.isNonEmptyString)(f)?(a.Logger.debug("Use ".concat(o.Constants.networks[p].name," linkToken to create adjust link")),{linkToken:f,networkParams:l}):(a.Logger.error("".concat(o.Constants.networks[p].name," linkToken is empty, can not use it to create adjust link")),null)}}else a.Logger.warn("Unknown network: "+u)}var g;return a.Logger.debug("Can not detect network, no network parameters found in URL"),null}},921:function(e,n){var r,t,o,a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},a.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.Constants=n.AdjustLinkParameters=n.LinkParameters=n.BaseParameter=void 0,function(e){e.campaign="campaign",e.adgroup="adgroup",e.creative="creative"}(t||(n.BaseParameter=t={})),function(e){e.label="label"}(o||(n.LinkParameters=o={})),n.AdjustLinkParameters=a(a({},t),o),n.Constants={domain:"app.adjust.com",adjustParameters:[t.campaign,t.adgroup,t.creative,o.label],networks:(r={},r.meta={name:"Meta",parameters:["fbclid","fbpid"]},r.google_ads={name:"Google",parameters:["gclid","gbraid","wbraid"]},r.tiktok_web={name:"Tiktok",parameters:["ttclid","ttp"]},r)}},538:function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.extractParameter=void 0;var t=r(614),o=r(185);function a(e,n,r){return void 0===r&&(r=!1),r||(t.Logger.warn("No value for `"+e+"` found, return default value if provided"),n&&"string"==typeof n||t.Logger.warn("No default value or invalid default value for `"+e+"` found, return null")),n||null}function i(e,n,r,i){if(Object.prototype.hasOwnProperty.call(r,"transform")&&"function"!=typeof r.transform&&t.Logger.error("Passed config for `"+e+"` contains `trasform` property, but it is not a function"),r.transform&&"function"==typeof r.transform)try{var s=r.transform(n);if("string"==typeof s)return t.Logger.debug("Transformed value for `"+e+"` is `"+s+"`"),s;throw"return value should be a string, but actual value is `"+s+"`"}catch(n){t.Logger.error("An error occured when custom `transfrom` function called for `"+e+"`: "+n)}var c=function(e,n,r,t){return n.find(o.isNonEmptyString)||a(e,r,t)}(e,n,r.defaultValue,i);return(0,o.isNonEmptyString)(c)&&t.Logger.debug("Found value for `"+e+"` is `"+c+"`"),c}function s(e,n){var r="Invalid configuration object provided for `"+e+"`.\nYou should specify `in` property which is a string or an array of strings which are input names of parameters to read";n&&(r="".concat(r,".\n").concat(n)),t.Logger.error(r)}function c(e,n,r){return(0,o.isNonEmptyString)(n)?e.searchParams.get(n)||"":(s(r,"One of provided keys is "+(""===n?"an empty string":"function"==typeof n?"a function":JSON.stringify(n))),"")}n.extractParameter=function(e,n,r,t){if(void 0===t&&(t=!1),!r||!r.in)return s(n),a(n,r&&r.defaultValue||void 0);if(Array.isArray(r.in)&&r.in.length>0){var o=r.in.map((function(r){return c(e,r,n)}));return i(n,o,r,t)}if("string"==typeof r.in){var u=c(e,r.in,n);return i(n,[u],r,t)}return s(n),a(n,r.defaultValue)}},989:function(e,n,r){var t=this&&this.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]])}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.linkTemplate=void 0;var o=r(921),a=r(614),i=r(185);function s(e,n){return"branded"===e&&function(e){return e in o.AdjustLinkParameters}(n)}n.linkTemplate=function(e){void 0===e&&(e={});var n=e.domain,r=e.token,c=e.iosAppSchema,u=e.iosDeeplinkPath,d=void 0===u?"":u,p=e.androidAppSchema,l=e.androidDeeplinkPath,f=void 0===l?"":l,g=t(e,["domain","token","iosAppSchema","iosDeeplinkPath","androidAppSchema","androidDeeplinkPath"]),m=(0,i.omitNotDefined)(g);if(!(0,i.isNonEmptyString)(r))return a.Logger.error("Link token couldn't be empty, can not generate adjust link"),null;var v="string"==typeof n?"branded":"standard";"branded"!==v||(0,i.isDomainValid)(n)||(a.Logger.warn("Provided domain `"+n+"` is invalid, using `"+o.Constants.domain+"` instead"),v="standard");var h,y={iosAppSchema:c,iosDeeplinkPath:d,androidAppSchema:p,androidDeeplinkPath:f};h=y,(0,i.isEmptyString)(h.iosAppSchema)&&a.Logger.error("Misconfigured deep link: `iosAppSchema` couldn't be an empty string"),(0,i.isEmptyString)(h.androidAppSchema)&&a.Logger.error("Misconfigured deep link: `androidAppSchema` couldn't be an empty string"),!(0,i.isNonEmptyString)(h.iosAppSchema)&&(0,i.isNonEmptyString)(h.iosDeeplinkPath)&&a.Logger.error("Misconfigured deep link: no valid `iosAppSchema` provided"),!(0,i.isNonEmptyString)(h.androidAppSchema)&&(0,i.isNonEmptyString)(h.androidDeeplinkPath)&&a.Logger.error("Misconfigured deep link: no valid `androidAppSchema` provided");var k=function(e,n,r,t){if((0,i.isNonEmptyString)(t.iosAppSchema)||(0,i.isNonEmptyString)(t.androidAppSchema)){if("standard"===e)return a.Logger.error("Can not create deep link with domain `"+n+"`, provide a valid branded domain to use deep link"),"https://".concat(n,"/").concat(r);if((0,i.isNonEmptyString)(t.iosAppSchema)&&!(0,i.isNonEmptyString)(t.androidAppSchema))return"https://".concat(n,"/").concat(t.iosDeeplinkPath,"?adjust_t=").concat(r);if(!(0,i.isNonEmptyString)(t.iosAppSchema)&&(0,i.isNonEmptyString)(t.androidAppSchema))return"https://".concat(n,"/").concat(t.androidDeeplinkPath,"?adjust_t=").concat(r);if(t.iosAppSchema===t.androidAppSchema&&t.iosDeeplinkPath===t.androidDeeplinkPath)return"https://".concat(n,"/").concat(t.iosDeeplinkPath,"?adjust_t=").concat(r);var s=encodeURIComponent("".concat(t.androidAppSchema,"://").concat(t.androidDeeplinkPath));return"https://".concat(n,"/").concat(t.iosDeeplinkPath,"?adjust_t=").concat(r,"&adjust_deeplink=").concat(s)}return"branded"===e?"https://".concat(n,"?adj_t=").concat(r):"https://".concat(o.Constants.domain,"/").concat(r)}(v,"branded"===v?n:o.Constants.domain,r,y),b=[];for(var S in m){var L=s(v,S)?"adj_"+S:S;b.push("".concat(L,"=").concat(encodeURIComponent(m[S])))}var j=b.length>0?b.join("&"):"";return j.length>0&&(j="branded"===v?"&"+j:"?"+j),"".concat(k).concat(j)}},614:function(e,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.Logger=n.LogLevel=void 0,function(e){e[e.debug=1]="debug",e[e.warn=2]="warn",e[e.error=3]="error",e[e.none=100]="none"}(r||(n.LogLevel=r={})),n.Logger={setLogLevel:function(e){return o=e},debug:function(e){return a(r.debug,e)},warn:function(e){return a(r.warn,e)},error:function(e){return a(r.error,e)}};var t="[adjust-smart-script]: ",o=r.debug;function a(e,n){if(!(e<o))switch(e){case r.debug:return void console.log(t+n);case r.warn:return void console.warn(t+n);case r.error:return void console.error(t+n)}}},185:function(e,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)};function t(e){return!!e&&("string"==typeof e&&e.trim().length>0)}Object.defineProperty(n,"__esModule",{value:!0}),n.isUrlValid=n.isEmptyObject=n.omitNotDefined=n.isDomainValid=n.isNonEmptyString=n.isEmptyString=void 0,n.isEmptyString=function(e){return"string"==typeof e&&0===e.trim().length},n.isNonEmptyString=t,n.isDomainValid=function(e){return!!e&&(!!t(e)&&(!(e.length>71)&&new RegExp("^[a-z0-9-]+(.go.link|.adj.st)$","i").test(e)))},n.omitNotDefined=function(e){return Object.keys(e).map((function(n){var r;return(r={})[n]=e[n],r})).filter((function(e){return!!e[Object.keys(e)[0]]})).reduce((function(e,n){return r(r({},e),n)}),{})},n.isEmptyObject=function(e){return Object.keys(e).length<=0},n.isUrlValid=function(e){try{return new URL(e),!0}catch(e){return!1}}},672:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.VERSION=void 0,n.VERSION="1.2.0"}},n={};var r=function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={exports:{}};return e[t].call(a.exports,a,a.exports,r),a.exports}(385);return r}()}));


    const mapping = {
        defaultLinkToken: "1sesosp8",
        domain: "qweqwe.go.link",
        campaign: { in: "utm_campaign", defaultValue: "web_to_app_campaign" },
        adgroup: { in: "utm_content", defaultValue: "web_to_app_adgroup" },
        creative: { in: "utm_term", defaultValue: "web_to_app_creative" },
        iosAppSchema: "testdayo",
            iosDeeplinkPath: "utm_content",
        androidAppSchema: "testdayo",
            androidDeeplinkPath: "utm_content",
        label: { in: "utm_medium", defaultValue: "web_to_app_label" },
        customParameters: [ 
            { in: "utm_source", out: "custom_param", defaultValue: "web_to_app_custom_param" }
        ],
    };

    const link = AdjustSmartScript.createLink(mapping);
    console.log(link);
    document.getElementById('link').innerText = link;
  </script>
</body>

</html>
